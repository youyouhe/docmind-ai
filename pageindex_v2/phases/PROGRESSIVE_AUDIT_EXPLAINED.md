# æ¸è¿›å¼å®¡æ ¸ç³»ç»Ÿ - ADDæ“ä½œè¯¦è§£

## ðŸŽ¯ é—®é¢˜åˆ†æž

### ä¸ºä»€ä¹ˆä¸€æ¬¡æ€§å®¡æ ¸å¾ˆéš¾åšå¥½ADDæ“ä½œï¼Ÿ

**æ‚¨çš„æ ¸å¿ƒæ´žå¯Ÿ**ï¼š
> "æ¯”å¦‚æœ‰ç¬¬ä¸€å°èŠ‚ï¼ŒæŽ¥ç€æ˜¯ç¬¬ä¸‰å°èŠ‚ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“çŸ¥é“ä¸­é—´æ¼äº†ä¸€ä¸ªç¬¬äºŒå°èŠ‚ã€‚å½“ç„¶å‰ææ˜¯ç¬¬ä¸‰å°èŠ‚æ˜¯æ­£ç¡®çš„ã€‚æ‰€ä»¥éœ€è¦åˆ†æ­¥éª¤æ¥å®Œæˆï¼Œä¸èƒ½ä¸€æ¬¡å°±è®©LLMæå‡ºå…¨éƒ¨ä¿®æ”¹å»ºè®®ã€‚"

**é—®é¢˜æ‰€åœ¨**ï¼š

```
ä¸€æ¬¡æ€§å®¡æ ¸çš„å›°å¢ƒï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LLMåŒæ—¶é¢å¯¹ï¼š                        â”‚
â”‚ - é”™è¯¯çš„èŠ‚ç‚¹ï¼ˆéœ€è¦åˆ é™¤ï¼‰             â”‚
â”‚ - æ ¼å¼æ··ä¹±çš„èŠ‚ç‚¹ï¼ˆéœ€è¦ä¿®æ­£ï¼‰         â”‚
â”‚ - ç¼ºå¤±çš„èŠ‚ç‚¹ï¼ˆéœ€è¦æ·»åŠ ï¼‰             â”‚
â”‚ - é¡µç é”™è¯¯çš„èŠ‚ç‚¹ï¼ˆéœ€è¦è°ƒæ•´ï¼‰         â”‚
â”‚                                      â”‚
â”‚ â†’ LLMå¾ˆéš¾åŒæ—¶å¤„ç†è¿™ä¹ˆå¤šä»»åŠ¡           â”‚
â”‚ â†’ ADDåˆ¤æ–­ç¼ºä¹å¯é ä¾æ®                 â”‚
â”‚ â†’ æ— æ³•ç¡®å®šç¼ºå¤±çš„ä½ç½®å’Œå†…å®¹           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… è§£å†³æ–¹æ¡ˆï¼šæ¸è¿›å¼5è½®å®¡æ ¸

```
Round 1: DELETE          Round 2: FORMAT         Round 3: SEQUENCE
æ¸…ç†é”™è¯¯èŠ‚ç‚¹    â†’     è§„èŒƒåŒ–ç¼–å·      â†’     æ£€æŸ¥è¿žç»­æ€§
                                                  â†“
                                            å‘çŽ°ç¼ºå¤±ï¼š
                                            ä¸€ã€...
                                            ä¸‰ã€...  â† ç¼º "äºŒã€"
                    â†“                              â†“
Round 5: PAGES   â†   Round 4: ADD
è°ƒæ•´é¡µç èŒƒå›´         åŸºäºŽç¼ºå¤±ç¼–å·æ·»åŠ 
```

---

## ðŸ“‹ Round 3: æ£€æŸ¥ç¼–å·è¿žç»­æ€§ï¼ˆæ ¸å¿ƒï¼‰

### è¿™ä¸€è½®çš„å…³é”®ä»»åŠ¡

**è¾“å…¥**ï¼šç»è¿‡Round 1å’ŒRound 2æ¸…ç†/è§„èŒƒåŒ–åŽçš„æ ‘ç»“æž„

**è¾“å‡º**ï¼šæ˜Žç¡®çš„ç¼ºå¤±åºåˆ—åˆ—è¡¨

### ç¤ºä¾‹1ï¼šæ‹›æ ‡æ–‡ä»¶

**è¾“å…¥æ ‘ç»“æž„**ï¼š
```
ç¬¬ä¸€ç«  æ‹›æ ‡å…¬å‘Š [p.1-5]
ç¬¬ä¸‰ç«  è¯„æ ‡åŠžæ³• [p.15-25]
ç¬¬å››ç«  é‡‡è´­éœ€æ±‚ [p.26-35]
```

**LLMæŽ¨ç†è¿‡ç¨‹**ï¼š
```
æ£€æŸ¥ç« èŠ‚ç¼–å·ï¼š
- ç¬¬ä¸€ç«  âœ“
- ç¬¬ä¸‰ç«  â† ç­‰ç­‰ï¼Œç¬¬äºŒç« å‘¢ï¼Ÿ
- ç¬¬å››ç«  âœ“

ç»“è®ºï¼šç¼ºå¤± "ç¬¬äºŒç« "
ä½ç½®ï¼šåœ¨"ç¬¬ä¸€ç« "å’Œ"ç¬¬ä¸‰ç« "ä¹‹é—´
é¡µç æŽ¨æµ‹ï¼šç¬¬ä¸€ç« ç»“æŸäºŽp.5ï¼Œç¬¬ä¸‰ç« å¼€å§‹äºŽp.15
         â†’ ç¬¬äºŒç« å¯èƒ½åœ¨ [p.6-14]
```

**è¾“å‡º**ï¼š
```json
{
  "missing_sequences": [
    {
      "parent_id": "root",
      "level": 1,
      "missing_number": "ç¬¬äºŒç« ",
      "position": {
        "after_node_id": "0001",  // ç¬¬ä¸€ç« 
        "before_node_id": "0003"   // ç¬¬ä¸‰ç« 
      },
      "expected_pattern": "ç¬¬äºŒç« ",
      "confidence": "high",  // å‰åŽèŠ‚ç‚¹éƒ½æ­£ç¡®ï¼Œé«˜ç½®ä¿¡åº¦
      "reason": "åœ¨ç¬¬ä¸€ç« å’Œç¬¬ä¸‰ç« ä¹‹é—´ç¼ºå¤±ç¬¬äºŒç« ",
      "estimated_pages": [6, 14]
    }
  ]
}
```

### ç¤ºä¾‹2ï¼šå¤šçº§ç¼ºå¤±

**è¾“å…¥æ ‘ç»“æž„**ï¼š
```
ç¬¬äºŒç«  æŠ•æ ‡äººé¡»çŸ¥
  ä¸€ã€æ€»åˆ™
    ï¼ˆä¸€ï¼‰é€‚ç”¨èŒƒå›´ [p.10-10]
    ï¼ˆä¸‰ï¼‰æŠ•æ ‡è´¹ç”¨ [p.11-12]  â† æ³¨æ„ï¼šè·³è¿‡äº†ï¼ˆäºŒï¼‰
  ä¸‰ã€æŠ•æ ‡æ–‡ä»¶  â† æ³¨æ„ï¼šè·³è¿‡äº†äºŒã€
```

**LLMæŽ¨ç†è¿‡ç¨‹**ï¼š
```
æ£€æŸ¥ç¬¬äºŒç« ä¸‹çš„ä¸€çº§ç¼–å·ï¼š
- ä¸€ã€æ€»åˆ™ âœ“
- ä¸‰ã€æŠ•æ ‡æ–‡ä»¶ â† ç¼ºå¤± "äºŒã€"

æ£€æŸ¥"ä¸€ã€æ€»åˆ™"ä¸‹çš„äºŒçº§ç¼–å·ï¼š
- ï¼ˆä¸€ï¼‰é€‚ç”¨èŒƒå›´ âœ“
- ï¼ˆä¸‰ï¼‰æŠ•æ ‡è´¹ç”¨ â† ç¼ºå¤± "ï¼ˆäºŒï¼‰"

å‘çŽ°2å¤„ç¼ºå¤±
```

**è¾“å‡º**ï¼š
```json
{
  "missing_sequences": [
    {
      "parent_id": "0001",  // "ä¸€ã€æ€»åˆ™"
      "level": 3,
      "missing_number": "ï¼ˆäºŒï¼‰",
      "position": {
        "after_node_id": "0002",  // ï¼ˆä¸€ï¼‰é€‚ç”¨èŒƒå›´
        "before_node_id": "0004"   // ï¼ˆä¸‰ï¼‰æŠ•æ ‡è´¹ç”¨
      },
      "expected_pattern": "ï¼ˆäºŒï¼‰",
      "confidence": "high",
      "reason": "åœ¨ï¼ˆä¸€ï¼‰å’Œï¼ˆä¸‰ï¼‰ä¹‹é—´ç¼ºå¤±ï¼ˆäºŒï¼‰",
      "estimated_pages": [10, 11]
    },
    {
      "parent_id": "root_chapter2",  // "ç¬¬äºŒç« "
      "level": 2,
      "missing_number": "äºŒã€",
      "position": {
        "after_node_id": "0001",  // ä¸€ã€æ€»åˆ™
        "before_node_id": "0008"   // ä¸‰ã€æŠ•æ ‡æ–‡ä»¶
      },
      "expected_pattern": "äºŒã€",
      "confidence": "high",
      "reason": "åœ¨ä¸€ã€å’Œä¸‰ã€ä¹‹é—´ç¼ºå¤±äºŒã€",
      "estimated_pages": [12, 18]
    }
  ]
}
```

---

## ðŸ” Round 4: åŸºäºŽç¼ºå¤±åºåˆ—ç”ŸæˆADDå»ºè®®

### è¾“å…¥ï¼šRound 3çš„ç¼ºå¤±åºåˆ—

```json
{
  "missing_number": "ï¼ˆäºŒï¼‰",
  "position": {"after": "0002", "before": "0004"},
  "estimated_pages": [10, 11],
  "confidence": "high"
}
```

### è½¬æ¢ä¸ºADDå»ºè®®

```json
{
  "action": "ADD",
  "parent_id": "0001",
  "suggested_title": "ï¼ˆäºŒï¼‰",  // åªæœ‰ç¼–å·æ¡†æž¶
  "suggested_level": 3,
  "suggested_pages": [10, 11],
  "insert_position": {
    "after_node_id": "0002",
    "before_node_id": "0004"
  },
  "reason": "ç¼–å·è¿žç»­æ€§æ£€æŸ¥å‘çŽ°ç¼ºå¤±ï¼ˆäºŒï¼‰",
  "confidence": "medium",  // ADDéœ€è¦PDFæ ¸å®žï¼Œæ‰€ä»¥é™çº§
  "needs_pdf_verification": true,
  "note": "æ ‡é¢˜å†…å®¹éœ€è¦ä»ŽPDF p.10-11è¯»å–"
}
```

### å…³é”®ç‚¹

1. **åªæä¾›ç¼–å·æ¡†æž¶** - `"ï¼ˆäºŒï¼‰"` è€Œä¸æ˜¯ `"ï¼ˆäºŒï¼‰å®šä¹‰"`
2. **éœ€è¦PDFæ ¸å®ž** - å¿…é¡»åŽ»PDFä¸­è¯»å–å®Œæ•´æ ‡é¢˜
3. **ç½®ä¿¡åº¦medium** - å³ä½¿ç¼–å·ç¼ºå¤±å¾ˆæ˜Žç¡®ï¼ŒADDä»éœ€è°¨æ…Ž
4. **æ˜Žç¡®æ’å…¥ä½ç½®** - afterå’Œbeforeéƒ½æŒ‡å®š

---

## ðŸ“„ PDFæ ¸å®žé˜¶æ®µå¦‚ä½•å¤„ç†ADD

### PDFVerifierçš„ADDæ ¸å®žé€»è¾‘

```python
async def _verify_add(self, advice: Dict, tree: Dict) -> Dict:
    """
    æ ¸å®žADDå»ºè®®
    
    æ­¥éª¤ï¼š
    1. è¯»å–å»ºè®®çš„é¡µç èŒƒå›´ï¼ˆestimated_pagesï¼‰
    2. åœ¨PDFä¸­æŸ¥æ‰¾åŒ¹é…çš„æ ‡é¢˜
    3. éªŒè¯æ ‡é¢˜æ ¼å¼æ˜¯å¦ç¬¦åˆé¢„æœŸç¼–å·
    4. æå–å®Œæ•´æ ‡é¢˜æ–‡æœ¬
    """
    
    suggested_title_pattern = advice.get("suggested_title")  # "ï¼ˆäºŒï¼‰"
    estimated_pages = advice.get("suggested_pages", [10, 11])
    
    # è¯»å–PDFé¡µé¢
    for page_num in range(estimated_pages[0], estimated_pages[1] + 1):
        page_text = await self._get_page_text(page_num)
        
        # æŸ¥æ‰¾åŒ¹é…çš„æ ‡é¢˜ï¼ˆä»¥"ï¼ˆäºŒï¼‰"å¼€å¤´çš„è¡Œï¼‰
        import re
        pattern = re.escape(suggested_title_pattern) + r"(.{0,30})"
        match = re.search(pattern, page_text)
        
        if match:
            # æ‰¾åˆ°äº†ï¼æå–å®Œæ•´æ ‡é¢˜
            full_title = match.group(0).strip()  # ä¾‹å¦‚ï¼š"ï¼ˆäºŒï¼‰å®šä¹‰"
            
            return {
                "verified": True,
                "evidence": page_text[match.start():match.end()+50],
                "confidence_adjusted": 0.8,
                "complete_title": full_title,  # â† å…³é”®ï¼šå®Œæ•´æ ‡é¢˜
                "found_on_page": page_num,
                "notes": f"åœ¨PDFç¬¬{page_num}é¡µæ‰¾åˆ°æ ‡é¢˜: {full_title}"
            }
    
    # æœªæ‰¾åˆ°
    return {
        "verified": False,
        "confidence_adjusted": 0.0,
        "notes": "åœ¨å»ºè®®çš„é¡µç èŒƒå›´å†…æœªæ‰¾åˆ°åŒ¹é…çš„æ ‡é¢˜"
    }
```

### æ‰§è¡Œé˜¶æ®µå¦‚ä½•ä½¿ç”¨æ ¸å®žç»“æžœ

```python
def _execute_add(self, tree: Dict, advice: Dict) -> bool:
    """æ‰§è¡ŒADDæ“ä½œ"""
    
    verification = advice.get("verification", {})
    
    if not verification.get("verified"):
        # æœªé€šè¿‡æ ¸å®žï¼Œä¸æ‰§è¡Œ
        return False
    
    # èŽ·å–PDFæ ¸å®žåŽçš„å®Œæ•´æ ‡é¢˜
    complete_title = verification.get("complete_title")  # "ï¼ˆäºŒï¼‰å®šä¹‰"
    found_page = verification.get("found_on_page")  # 10
    
    if not complete_title:
        return False
    
    # åˆ›å»ºæ–°èŠ‚ç‚¹
    new_node = {
        "id": self._generate_node_id(),
        "title": complete_title,  # â† ä½¿ç”¨ä»ŽPDFè¯»å–çš„å®Œæ•´æ ‡é¢˜
        "level": advice.get("suggested_level"),
        "page_start": found_page,
        "page_end": found_page,  # æš‚æ—¶è®¾ä¸ºåŒä¸€é¡µï¼ŒåŽç»­å¯è°ƒæ•´
        "children": []
    }
    
    # æ’å…¥åˆ°æ ‘ä¸­
    parent_id = advice.get("parent_id")
    insert_position = advice.get("insert_position", {})
    
    self._insert_node_at_position(tree, new_node, parent_id, insert_position)
    
    return True
```

---

## ðŸŽ¯ ä¸ºä»€ä¹ˆæ¸è¿›å¼æ–¹æ³•å¯é 

### 1. é€æ­¥æ¸…ç†ï¼Œé€æ­¥æ˜Žç¡®

```
Round 1åŽï¼š
ç¬¬ä¸€ç«  æ‹›æ ‡å…¬å‘Š
4ã€æŠ•æ ‡äººä¸å¾—...  â† å™ªéŸ³èŠ‚ç‚¹
ç¬¬ä¸‰ç«  è¯„æ ‡åŠžæ³•

       â†“ DELETE

Round 2åŽï¼š
ç¬¬ä¸€ç«  æ‹›æ ‡å…¬å‘Š
ç¬¬ä¸‰ç«  è¯„æ ‡åŠžæ³•  â† çŽ°åœ¨å¾ˆæ¸…æ¥šç¼ºç¬¬äºŒç« äº†

       â†“ CHECK_SEQUENCE

Round 3æ£€æµ‹ï¼š
ç¼ºå¤±ï¼šç¬¬äºŒç« 
ç½®ä¿¡åº¦ï¼šhighï¼ˆå› ä¸ºç¬¬ä¸€ç« å’Œç¬¬ä¸‰ç« éƒ½æ­£ç¡®ï¼‰
```

### 2. åŸºäºŽç¡®å®šæ€§å¼ºçš„è§„å¾‹

**ç¡®å®šæ€§é«˜**ï¼ˆåº”è¯¥åšï¼‰ï¼š
- âœ… ä¸€ã€äºŒã€ â†’ ç¼ºå¤±"äºŒã€"
- âœ… ï¼ˆä¸€ï¼‰ï¼ˆä¸‰ï¼‰ â†’ ç¼ºå¤±"ï¼ˆäºŒï¼‰"
- âœ… 1ã€2ã€4ã€ â†’ ç¼ºå¤±"3ã€"

**ç¡®å®šæ€§ä½Ž**ï¼ˆä¸åº”è¯¥åšï¼‰ï¼š
- âŒ åªæœ‰"ç¬¬ä¸€ç« "ï¼Œå°±æŽ¨æµ‹åº”è¯¥æœ‰"ç¬¬äºŒç« "
- âŒ æ ¹æ®æ–‡æ¡£ç±»åž‹"åº”è¯¥æœ‰"çš„ç« èŠ‚ï¼ˆå¤ªä¸»è§‚ï¼‰
- âŒ é¡µç è·¨åº¦å¤§å°±æŽ¨æµ‹ä¸­é—´æœ‰èŠ‚ç‚¹ï¼ˆä¸å¯é ï¼‰

### 3. PDFæ ¸å®žæä¾›æœ€ç»ˆä¿éšœ

å³ä½¿ç¼–å·ç¼ºå¤±å¾ˆæ˜Žç¡®ï¼Œä»ç„¶ï¼š
1. åŽ»PDFä¸­æŸ¥æ‰¾æ ‡é¢˜
2. éªŒè¯æ ‡é¢˜æ˜¯å¦å­˜åœ¨
3. æå–å®Œæ•´æ ‡é¢˜æ–‡æœ¬
4. åªæœ‰æ‰¾åˆ°æ‰æ‰§è¡ŒADD

---

## ðŸ“Š å¯¹æ¯”ï¼šä¸€æ¬¡æ€§ vs æ¸è¿›å¼

| æ–¹é¢ | ä¸€æ¬¡æ€§å®¡æ ¸ | æ¸è¿›å¼å®¡æ ¸ |
|------|----------|----------|
| **ADDåˆ¤æ–­ä¾æ®** | LLMä¸»è§‚æŽ¨æµ‹ | ç¼–å·è¿žç»­æ€§æ£€æŸ¥ |
| **ç½®ä¿¡åº¦** | ä½Žï¼ˆ30-50%ï¼‰ | é«˜ï¼ˆ80-90%ï¼‰ |
| **è¯¯æ·»åŠ çŽ‡** | é«˜ï¼ˆ>20%ï¼‰ | ä½Žï¼ˆ<5%ï¼‰ |
| **å¯è§£é‡Šæ€§** | å¼± | å¼ºï¼ˆæ˜Žç¡®çš„ç¼ºå¤±ä½ç½®ï¼‰ |
| **å¤„ç†æ—¶é—´** | 5ç§’ | 15-20ç§’ |
| **LLMè°ƒç”¨æ¬¡æ•°** | 1æ¬¡ | 5æ¬¡ |
| **æˆæœ¬** | Â¥0.0003 | Â¥0.0015 |

---

## ðŸ’¡ å®žé™…æ¡ˆä¾‹

### æ¡ˆä¾‹ï¼šæ‹›æ ‡æ–‡ä»¶

**åŽŸå§‹treeï¼ˆæœ‰é”™è¯¯ï¼‰**ï¼š
```
ç¬¬ä¸€ç«  æ‹›æ ‡å…¬å‘Š [p.1-8]
4ã€æŠ•æ ‡äººä¸å¾—ç›¸äº’ä¸²é€š...  [p.11]  â† é”™è¯¯èŠ‚ç‚¹
5ã€æŠ•æ ‡æ–‡ä»¶æ ¼å¼...  [p.11]  â† é”™è¯¯èŠ‚ç‚¹
ç¬¬ä¸‰ç«  è¯„æ ‡åŠžæ³• [p.23-30]
äº”ã€è¯„æ ‡  [p.35]  â† å­¤ç«‹èŠ‚ç‚¹
```

**Round 1: DELETE**
```
åˆ é™¤ï¼š
- 4ã€æŠ•æ ‡äººä¸å¾—... ï¼ˆå®Œæ•´å¥å­ï¼‰
- 5ã€æŠ•æ ‡æ–‡ä»¶æ ¼å¼... ï¼ˆå®Œæ•´å¥å­ï¼‰

ç»“æžœï¼š
ç¬¬ä¸€ç«  æ‹›æ ‡å…¬å‘Š [p.1-8]
ç¬¬ä¸‰ç«  è¯„æ ‡åŠžæ³• [p.23-30]
äº”ã€è¯„æ ‡ [p.35]
```

**Round 2: MODIFY_FORMAT**
```
æ— æ ¼å¼é—®é¢˜ï¼Œè·³è¿‡
```

**Round 3: CHECK_SEQUENCE**
```
å‘çŽ°ç¼ºå¤±ï¼š
1. "ç¬¬äºŒç« " - åœ¨ç¬¬ä¸€ç« å’Œç¬¬ä¸‰ç« ä¹‹é—´
   ä½ç½®ï¼š[p.9-22]
   ç½®ä¿¡åº¦ï¼šhigh

2. "äº”ã€è¯„æ ‡"çš„çˆ¶èŠ‚ç‚¹ä¸æ˜Žç¡®
   å¯èƒ½ç¼ºå¤±ï¼šä¸€ã€äºŒã€ä¸‰ã€å››ã€
   ç½®ä¿¡åº¦ï¼šmediumï¼ˆä¸ç¡®å®šæ˜¯å¦çœŸçš„ç¼ºå¤±ï¼‰
```

**Round 4: ADD**
```
å»ºè®®æ·»åŠ ï¼š
- "ç¬¬äºŒç« " at [p.9-22]
  ï¼ˆç½®ä¿¡åº¦highï¼Œä¼šè¢«é‡‡çº³ï¼‰

- ä¸å»ºè®®æ·»åŠ ä¸€ã€äºŒã€ä¸‰ã€å››ã€
  ï¼ˆç½®ä¿¡åº¦mediumï¼Œä¸”æ— æ˜Žç¡®ä½ç½®ï¼Œä¸é‡‡çº³ï¼‰
```

**Round 5: PDFæ ¸å®ž**
```
è¯»å–PDF p.9-22ï¼š
æ‰¾åˆ°ï¼š"ç¬¬äºŒç«  æŠ•æ ‡äººé¡»çŸ¥"

æ›´æ–°ADDå»ºè®®ï¼š
- complete_title: "ç¬¬äºŒç«  æŠ•æ ‡äººé¡»çŸ¥"
- found_on_page: 9
- verified: True
```

**æœ€ç»ˆç»“æžœ**ï¼š
```
ç¬¬ä¸€ç«  æ‹›æ ‡å…¬å‘Š [p.1-8]
ç¬¬äºŒç«  æŠ•æ ‡äººé¡»çŸ¥ [p.9-22]  â† æˆåŠŸæ·»åŠ ï¼
ç¬¬ä¸‰ç«  è¯„æ ‡åŠžæ³• [p.23-30]
äº”ã€è¯„æ ‡ [p.35]  â† ä¿ç•™ï¼ˆè™½ç„¶å­¤ç«‹ä½†æ²¡æœ‰æ˜Žç¡®è¯æ®è¯´å®ƒé”™ï¼‰
```

---

## ðŸš€ å®žçŽ°å»ºè®®

### 1. ä¼˜å…ˆçº§ï¼šå…ˆå®žçŽ°é«˜ç½®ä¿¡åº¦åœºæ™¯

```python
# ç¬¬ä¸€é˜¶æ®µï¼šåªå¤„ç†æ˜Žç¡®çš„æ•°å­—/ç¼–å·ç¼ºå¤±
if confidence == "high" and has_clear_before_after:
    generate_add_advice()

# ç¬¬äºŒé˜¶æ®µï¼šå¯ä»¥å¤„ç†æ›´å¤æ‚çš„æƒ…å†µ
# ...
```

### 2. ä¸Žç”¨æˆ·äº¤äº’ï¼ˆå¯é€‰ï¼‰

```python
# å¯¹äºŽADDå»ºè®®ï¼Œå¯ä»¥ç»™ç”¨æˆ·ç¡®è®¤
for advice in add_advice_list:
    print(f"å‘çŽ°ç¼ºå¤±ï¼š{advice['suggested_title']}")
    print(f"ä½ç½®ï¼šåœ¨ {advice['after']} å’Œ {advice['before']} ä¹‹é—´")
    print(f"é¡µç ï¼š{advice['estimated_pages']}")
    
    if input("æ˜¯å¦æ·»åŠ ï¼Ÿ(y/n): ") == 'y':
        execute_add(advice)
```

### 3. æ—¥å¿—è®°å½•

```python
{
  "action": "ADD",
  "status": "executed",
  "detection_method": "sequence_check",  # åŸºäºŽåºåˆ—æ£€æŸ¥
  "confidence_before_pdf": 0.9,  # PDFæ ¸å®žå‰
  "confidence_after_pdf": 0.95,  # PDFæ ¸å®žåŽ
  "complete_title": "ç¬¬äºŒç«  æŠ•æ ‡äººé¡»çŸ¥",
  "detection_details": {
    "missing_between": ["ç¬¬ä¸€ç« ", "ç¬¬ä¸‰ç« "],
    "found_on_page": 9,
    "pdf_evidence": "..."
  }
}
```

---

## âœ… æ€»ç»“

æ‚¨çš„å»ºè®®å®Œå…¨æ­£ç¡®ï¼**æ¸è¿›å¼ã€åˆ†æ­¥éª¤çš„å®¡æ ¸**æ¯”ä¸€æ¬¡æ€§å®¡æ ¸å¯é å¾—å¤šï¼š

1. **Round 1-2æ¸…ç†çŽ¯å¢ƒ** - åŽ»é™¤å™ªéŸ³ï¼Œè§„èŒƒæ ¼å¼
2. **Round 3æ£€æŸ¥è¿žç»­æ€§** - åŸºäºŽç¡®å®šæ€§è§„å¾‹å‘çŽ°ç¼ºå¤±
3. **Round 4ç”ŸæˆADDå»ºè®®** - åªé’ˆå¯¹é«˜ç½®ä¿¡åº¦ç¼ºå¤±
4. **PDFæ ¸å®ž** - ä»ŽåŽŸæ–‡æå–å®Œæ•´æ ‡é¢˜
5. **ä¿å®ˆæ‰§è¡Œ** - åªæ‰§è¡Œé€šè¿‡æ ¸å®žçš„ADD

è¿™æ ·ADDæ“ä½œå°±ä»Ž"LLMä¸»è§‚çŒœæµ‹"å˜æˆäº†"åŸºäºŽç¼–å·è§„å¾‹çš„ç¡®å®šæ€§æŽ¨æ–­+PDFæ ¸å®ž"ï¼Œå¯é æ€§å¤§å¤§æé«˜ï¼
